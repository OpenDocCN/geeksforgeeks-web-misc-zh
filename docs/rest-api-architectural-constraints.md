# REST API 架构约束

> 原文:[https://www . geesforgeks . org/rest-API-architectural-constraints/](https://www.geeksforgeeks.org/rest-api-architectural-constraints/)

REST 代表表示状态转移，API 代表应用程序接口。REST 是一种软件架构风格，它定义了用于创建 web 服务的一组规则。遵循 REST 架构风格的 Web 服务被称为 RESTful web 服务。它允许请求系统通过使用一组统一的预定义规则来访问和操作 web 资源。基于 REST 的系统中的交互是通过互联网的超文本传输协议(HTTP)进行的。

Restful 系统包括:

*   请求资源的客户。
*   拥有资源的服务器。

根据行业标准创建 REST 应用编程接口非常重要，这可以简化开发并提高客户端的采用率。

**RESTful API 的架构约束:**下面列出了构成任何 web 服务的六个架构约束:

*   统一界面
*   无国籍的
*   可缓冲的
*   客户端-服务器
*   分层系统
*   按需编码

REST 架构唯一可选的约束是按需编写代码。如果一个服务违反了任何其他约束，它就不能被严格地称为 RESTful。

**统一接口:**这是区分 REST API 和非 REST API 的一个关键约束。它建议应该有一种统一的方式与给定的服务器交互，而不考虑设备或应用程序类型(网站、移动应用程序)。
统一界面有四个指导原则是:

*   **基于资源:**在请求中识别单个资源。例如:API/用户。
*   **通过表示操纵资源:**客户机具有资源的表示，并且它包含足够的信息来修改或删除服务器上的资源，只要它有这样做的权限。示例:通常，当用户请求用户列表时，用户会获得一个用户 id，然后使用该 id 删除或修改该特定用户。
*   **自我描述消息:**每条消息都包含足够的信息来描述如何处理消息，以便服务器可以轻松分析请求。
*   **超媒体作为应用状态的引擎(HATEOAS):** 它需要包含每个响应的链接，以便客户端可以轻松发现其他资源。

**无状态:**这意味着处理请求的必要状态包含在请求本身中，服务器不会存储与会话相关的任何内容。在 REST 中，客户端必须包含服务器完成请求的所有信息，无论是作为查询参数、头还是 URI 的一部分。无状态使可用性更高，因为服务器不必维护、更新或传达会话状态。当客户端需要向服务器发送太多数据时会有一个缺点，这样会缩小网络优化的范围并需要更多的带宽。

**可缓存:**每个响应都应该包括响应是否可缓存，以及响应可以在客户端缓存多长时间。客户端将从其缓存中为任何后续请求返回数据，无需再次向服务器发送请求。管理良好的缓存部分或完全消除了一些客户端-服务器交互，进一步提高了可用性和性能。但是有时用户可能会收到过时数据。

**客户端-服务器:** REST 应用程序应该具有客户端-服务器架构。客户机是请求资源而不关心数据存储的人，数据存储保持在每个服务器的内部，服务器是拥有资源而不关心用户界面或用户状态的人。它们可以独立进化。客户端不需要了解业务逻辑，服务器不需要了解前端 UI。

**分层系统:**一个应用架构需要由多个层组成。除了直接层之外，每一层对任何一层都一无所知，客户端和终端服务器之间可以有很多中间服务器。中间服务器可以通过实现负载平衡和提供共享缓存来提高系统可用性。

**按需编码:**是可选功能。据此，服务器也可以向客户端提供可执行代码。按需代码的例子可能包括已编译的组件，如 Java 小程序和客户端脚本，如 JavaScript。

**REST API 的规则:**在创建 REST API 端点时，有一些规则应该牢记在心。

*   REST 是基于资源或名词，而不是基于动作或动词。这意味着 REST API 的 URI 应该总是以名词结尾。示例:/api/users 就是一个很好的例子，但是/api？type=users 是创建 REST API 的一个不好的例子。
*   HTTP 动词用于标识动作。一些 HTTP 动词是–GET、PUT、POST、DELETE、UPDATE、PATCH。
*   一个 web 应用程序应该被组织成像用户这样的资源，然后使用像 GET、PUT、POST、DELETE 这样的 HTTP 动词来修改这些资源。作为一名开发人员，应该清楚的是，只需查看端点和使用的 HTTP 方法就可以完成。
    T42】更新 id = 1 的用户 T64】得到 T66】获取 id = 1 的用户

    | 上呼吸道感染 | HTTP 动词 | 描述 |
    | --- | --- | --- |
    | API/用户 | 得到 | 获取所有用户 |
    | 原料药/用户/新 | 得到 | 显示添加新用户的表单 |
    | API/用户 | 邮政 | 添加用户 |
    | API/用户/1 | 放 |
    | API/用户/1/编辑 | 得到 | 为 id = 1 的用户显示编辑表单 |
    | API/用户/1 | 删除 | 删除 id = 1 的用户 |
    | API/用户/1 |

*   始终在 URL 中使用复数，以在整个应用程序中保持 API URI 的一致性。
*   发送正确的 HTTP 代码来指示成功或错误状态。

**注意:**你可以很容易地使用 GET 和 POST，但是为了使用 PUT 和 DELETE，你需要安装方法覆盖。您可以通过下面的代码来实现这一点:

```
npm install method-override --save
```

这仅仅需要在您代码中编写这个包:

```
var methodOverride = require("method-override");
```

现在，您可以轻松使用 PUT 和 DELETE 路由:

```
app.use(methodOverride("_method"));
```

**HTTP 动词:**下面介绍一些常见的 HTTP 方法/动词:

*   **GET:** 检索请求 URI 标识的一个或多个资源，它可以缓存接收到的信息。
*   **POST:** 通过提交请求创建资源，在这种情况下，响应是不可缓存的。如果没有对端点应用安全性，这种方法是不安全的，因为它允许任何人通过提交来创建随机资源。
*   **PUT:** 更新请求 URI 指定的服务器上的现有资源。
*   **删除:**删除请求 URI 指定的服务器上的现有资源。它总是为每个请求返回一个适当的 HTTP 状态。
*   GET、PUT、DELETE 方法也称为幂等方法。应用一次操作或多次应用具有相同的效果。示例:从服务器上删除任何资源，它成功并显示 200 OK，然后再次尝试删除该资源，它将显示错误消息 410 GONE。