# Elasticsearch 搜索引擎|简介

> 原文:[https://www . geesforgeks . org/elastic search-search-engine-an-introduction/](https://www.geeksforgeeks.org/elasticsearch-search-engine-an-introduction/)

**Elasticsearch** 是基于 Apache Lucene 的全文搜索和分析引擎。弹性搜索使对来自多个来源的数据执行数据聚合操作以及对存储的数据执行非结构化查询(如模糊搜索)变得更加容易。

它以类似文档的格式存储数据，类似于 MongoDB。数据以 JSON 格式序列化。这增加了它的非关系性质，因此，它也可以用作 NoSQL/非关系数据库。

典型的弹性搜索文档如下所示:

```
{
  "first_name": "Divij",
  "last_name":"Sehgal",
  "email":"xyz@gmail.com",
  "dob":"04-11-1995",
  "city":"Mumbai",
  "state":"Maharashtra",
  "country":"India",
  "occupation":"Software Engineer",
}

```

*   它是分布式的，水平可扩展的，因为在更多的弹性搜索实例中，可以在需要时添加到集群中，而不是增加一台运行弹性搜索实例的机器的能力。
*   它是 RESTful 和以 API 为中心的，因此使它更有用。它的操作可以通过 RestFul API 通过 HTTP 轻松访问，因此可以无缝集成到任何应用程序中。此外，各种编程语言中有许多包装器，避免了手动使用应用编程接口的需要，大多数操作都可以通过处理与引擎本身通信的库函数调用来访问。
*   通过使用 CRUD 操作–**C**reate、 **R** ead、 **U** pdate、**D**elete–可以对持久存储中的数据进行有效操作。这些类似于关系数据库实现的 CRUD，可以通过 RESTful APIs 中的 HTTP 接口来执行。

**我们在哪里使用 Elasticsearch？**

**弹性搜索非常适合–**

*   存储和操作非结构化或半结构化数据，这些数据的结构可能经常发生变化。由于无模式性质，添加新列不需要向表中添加新列的开销。通过简单地将新列添加到索引的传入数据中，Elasticsearch 能够容纳新列，并使其可用于进一步的操作。
*   全文搜索:通过使用每个文档的 TF-IDF 计数将搜索词与文档内容相关联，对每个文档的相关性进行排名，模糊搜索能够根据与搜索的相关性对文档进行排名。
*   弹性搜索通常用作存储和分析由不同系统生成的日志的工具。像 Kibana 这样的聚合工具可以用来根据收集的数据实时构建聚合和可视化。
*   它与数据的时间序列分析配合得很好，因为它可以从输入的数据中实时提取指标。
*   CI/CD 管道中的基础设施监控。

**弹性搜索概念**

弹性搜索基于一个被称为[反向索引](https://www.geeksforgeeks.org/inverted-index/)的概念。这个概念来自 Lucene 库(记住上面的 Apache Lucene)。

这个索引类似于出现在书后面的术语，显示了书中每个重要术语可能出现或讨论的页面。倒排索引使得基于查询中存在的关键字，更容易将查询解析为与它们可能相关的特定文档，并且通过限制要为该查询考虑的文档的搜索空间来加速文档检索过程。

我们来看下面三个**权力的游戏**对话:

1.  “冬天来了。”
2.  "一个人的头脑需要书籍，就像一把剑需要磨刀石一样，这样才能保持它的锋芒。"
3.  "每一次飞行都是从坠落开始的。"
4.  "语言可以完成剑不能完成的事情."

将这些对话中的每一个都视为一个文档，即每个文档都有一个结构，如:

```
{
    "dialogue": "....."
}

```

经过一些简单的文本处理:在降低文本的音量和去除标点符号之后，我们可以构建如下的“倒排索引”:

| 学期 | 频率 | 文档 |
| --- | --- | --- |
| a | four | 2, 3 |
| 完成 | one | four |
| 如同 | one | Two |
| 开始 | one | three |
| 书 | one | Two |
| 能 | one | four |
| 不能 | one | four |
| 来 | one | one |
| 边缘 | one | Two |
| 每个 | one | three |
| 秋天 | one | three |
| 飞行 | one | three |
| 如果 | one | Two |
| 是 | Two | 1, 2 |
| 它 | one | Two |
| 它的 | one | Two |
| 保持 | one | three |
| 头脑 | one | Two |
| 需要 | one | Two |
| 剑 | one | Two |
| 索兹 | one | three |
| 到 | one | Two |
| 什么 | one | three |
| 磨石 | one | Two |
| 冬天 | one | one |
| 随着 | one | three |
| 话 | one | four |

*   前两列构成了所谓的*词典*。这是 Elasticsearch 搜索搜索词以了解哪些文档可能与当前搜索相关的地方。
*   第三列也被称为*发帖*。这将每个单独的术语与其可能存在的文档联系起来。

**与弹性搜索相关的常见术语如下:**

*   **集群**:集群是运行 Elasticsearch 引擎的一组系统，它们紧密对应地参与和运行，以存储数据和解析查询。根据它们在集群中的角色，它们被进一步分类。
*   **节点**:节点是运行弹性搜索运行时实例的 JVM 进程，集群中的其他机器或节点可以通过网络独立访问。
*   **索引**:弹性搜索中的索引类似于关系数据库中的*表*。
*   **映射**:每个索引都有一个关联的映射，本质上是索引中每个单独文档可以保存的数据的模式定义。这可以为每个索引手动创建，也可以在将数据推送到索引时自动添加。
*   **文档**:JSON 文档。用关系术语来说，这将表示表中的一行。
*   **分片**:分片是可能属于也可能不属于同一索引的数据块。由于属于单个索引的数据可能会变得非常大，比如几百千兆字节甚至几兆字节，因此垂直增长存储是不可行的。相反，数据在逻辑上被划分为存储在不同节点上的碎片，这些碎片分别对其中包含的数据进行操作。这允许水平缩放。
*   **副本**:集群中的每个分片都可以复制到集群中的一个或多个节点。这允许故障转移备份。如果其中一个节点出现故障或此时无法利用其资源，则带有数据的副本始终可用于处理数据。默认情况下，为每个碎片创建一个副本，并且数量是可配置的。除了故障转移之外，使用副本还可以提高搜索性能。