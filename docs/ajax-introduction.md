# Ajax 简介

> 原文:[https://www.geeksforgeeks.org/ajax-introduction/](https://www.geeksforgeeks.org/ajax-introduction/)

**简介:**
下面的教程将提供 Ajax 及其使用的简短介绍。在理解这些术语之前，看几个实际的例子来展示 Ajax 的力量。脸书、Instagram、推特等被认为是查看新闻提要时的情况，如果喜欢某人的帖子，只需点击喜欢按钮，喜欢的计数就会增加，而无需刷新页面。现在想象一下情况，如果有这种情况，点击 like 按钮，完整的页面将再次加载，这将使这样的过程。现在的问题是，对于这样一个需要完整加载网页的小任务，是否要再次点击按钮。绝对不会，因为没有人会做这样荒唐的事(后一种情况)。所以这意味着 like 的这个特性非常有用，因为它防止了整个页面的重新加载。它只与服务器交流必要的信息，并向最终用户显示(在这种情况下是相似数量的增加)。
再考虑一个访问谷歌搜索任何东西的情况。通常，当开始键入想要搜索的关键词时，观察到许多建议出现在搜索栏中。现在，他们从哪里来？当然不是从客户端。结果再次是与服务器通信的能力，而无需再次重新加载页面。
像这样的例子，可以考虑的有几十个。背后的全部力量只不过是 Ajax。让我们简单讨论一下 Ajax 及其实现。

**什么是 Ajax？**
Ajax 是异步 Javascript 和 XML 的缩写。它用于在不刷新网页的情况下与服务器通信，从而增加用户体验和更好的性能。

**先决条件:**
理解文章的后半部分不需要这样的先决条件。只有 HTML、CSS、Javascript 的基础知识好走。

**它是如何工作的？**
首先，让我们了解一下异步实际上是什么意思。有两种类型的请求同步和异步。同步请求是按顺序执行的请求，即如果一个进程正在运行，同时另一个进程想要执行，则不允许，这意味着一次只能执行一个进程。这是不好的，因为在这种类型中，大多数时间中央处理器保持空闲，例如在进程中的输入/输出操作期间，这比中央处理器处理指令慢一个数量级。因此为了充分利用中央处理器和其他资源，使用异步调用。更多信息请访问[链接](https://en.wikipedia.org/wiki/Asynchronous_I/O)。为什么这里会出现 javascript 这个词？实际上，这些请求是通过使用 javascript 函数发出的。现在是用来创建 **XMLHttpRequest 对象**的术语。
因此，以上解释的总结是，Ajax 允许通过与后台服务器交换少量数据来异步更新网页。现在讨论重要的部分及其实现。对于实现 Ajax，只需知道 XMLHttpRequest 对象。实际上是什么？它是一个用于在幕后与服务器交换数据的对象。试着记住 OOP 的范例，它说对象通过调用方法(或者一般意义上的消息传递)进行通信。同样的情况也适用于这里。通常，创建这个对象并使用它来调用导致有效通信的方法。所有现代浏览器都支持 XMLHttpRequest 对象。

**基本语法:**创建对象的语法如下

```
req = new XMLHttpRequest();
```

有两种类型的方法 open()和 send()。这些方法的用途解释如下。

```
req.open("GET", "abc.php", true);
req.send();
```

以上两行描述了这两种方法。req 代表请求，它基本上是一个引用变量。GET 参数通常是发送请求的两种方法之一。根据是通过开机自检还是通过获取方法发送数据，也可以使用开机自检。第二个参数是实际处理请求的文件名。第三个参数为真，它表明请求是异步处理还是同步处理。默认情况下为真，这意味着请求是异步的。open()方法在将请求发送到服务器之前准备好请求。send 方法用于向服务器发送请求。
通过 get 或 POST 请求发送参数。语法如下

```
req.open("GET", "abc.php?x=25", true);
req.send();
```

在上面几行代码中，指定的查询以 URL 的形式后跟？然后是变量的名称，然后是=和相应的值。如果发送两个或多个变量，请在两个变量之间使用&符号。上面显示的方法适用于 GET 请求。通过开机自检发送数据，然后以如下所示的发送方式发送。

```
req.send("name=johndoe&marks=99");
```

。

使用如下所示的 setRequestHeader()方法。

```
req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
```

**事件和处理机制:**
任何点击按钮、悬停在元素上、页面加载等动作都被称为事件。还要注意 javascript 可以检测事件的事实。因此，将特定事件的代码与其可以用 javascript 实现的动作绑定在一起。这些基本上都是事件处理程序。
实现实际保存事件的事件处理程序。事件处理程序基本上是用 javascript 编写的函数，当用户触发一个事件时，这些函数会执行或设置为动作。当通过 send 方法发送请求时，通常会在稍后得到服务器的响应。但是响应时间的获取是未知的。所以追踪它。
因此要跟踪 readystatechange 事件的响应，该事件与事件处理程序(函数)绑定，当响应到来时，该事件处理程序(函数)将被执行。
当向服务器发送请求时，根据响应执行操作。onreadystatechange 事件在每次 readyState 更改时触发。那么实际上什么是就绪状态，onreadystate 事件实际上会在什么时候发生，在请求和响应之间会发生多少次？
XMLHttpRequest 对象有一个名为 readyState 的属性，该属性的值在整个请求-响应过程中发生变化，即请求何时被准备、发送、解析、处理以及响应何时到来。这就是为什么它被称为 os onreadystatechange。
onreadystatechange 存储了一个函数(或函数的名称)，每次 readyState 属性发生变化时都会自动调用该函数。
readyState 保存从 0 到 4 的不同值。

1.  请求未初始化
2.  服务器连接已建立
3.  收到请求
4.  处理请求
5.  请求完成，响应就绪

XMLHttpRequest 还有一个名为 status 的属性。该状态具有以下值

*   200:“好的”
*   404:“找不到页面”

现在请记住，当 readyState 为 4 且状态为 200 时，响应是就绪的。
上面描述的全部内容是用下面给出的编码实现的

```
<p id = "dis">< /p>
req.onreadystatechange = function(){
  if(req.readyState == 4 && req.status == 200){
      document.getElementById("dis").innerHTML = req.responseText;
  }
}
```

(注意:这只是一段代码，而且描述了客户端和服务器之间的通信，因此如果在 IDE 上运行，上述代码将不会显示任何效果)
在上述代码中，如果条件为真(即响应准备就绪)，则显示结果。
**优势:**

1.  速度得到了提高，因为不需要再次重新加载页面。
2.  AJAX 对 web 服务器进行异步调用，这意味着客户端浏览器避免在开始呈现之前等待所有数据到达。
3.  表单验证可以通过它成功完成。
4.  带宽利用率–当从同一页面提取数据时，它可以节省内存。
5.  更具互动性。

**缺点:**

1.  Ajax 依赖于 Javascript。如果浏览器或操作系统有一些 Javascript 问题，Ajax 将不支持。
2.  Ajax 在搜索引擎中可能会有问题，因为它的大部分部分都使用了 Javascript。
3.  用 AJAX 编写的源代码很容易被人阅读。Ajax 中会有一些安全问题。
4.  调试很困难。
5.  使用支持 AJAX 的页面时浏览器后退按钮出现问题。